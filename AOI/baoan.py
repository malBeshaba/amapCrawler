import requests
import json
import pandas as pd

ret = requests.get('http://search.gd.gov.cn/jsonp/sites?calback=success&callback'
                   '=jQuery36006251517195693272_1659080806390&order=1&position=all&text=&page=1&pagesize=159'
                   '&including_link_doc=1&sites=755001&category_id=115981%2C115977%2C115974%2C115970%2C115967'
                   '%2C115965%2C115963%2C115961%2C115959%2C115956%2C115952%2C115948%2C115942%2C115931%2C115914'
                   '%2C115896%2C115863%2C142420%2C142421%2C142422%2C142423%2C142424%2C142425%2C142426%2C142427'
                   '%2C142428%2C142429%2C115847%2C141248%2C141259%2C141270%2C141281%2C141292%2C141303%2C116816'
                   '%2C116815%2C116813%2C116812%2C116811%2C116810%2C116808%2C116807%2C116806%2C116805%2C116804'
                   '%2C116803%2C116802%2C116801%2C116800%2C116799%2C116798%2C116797%2C116796%2C116793%2C116792'
                   '%2C116791%2C116790%2C116789%2C116788%2C116786%2C116785%2C116784%2C116783%2C116782%2C116781'
                   '%2C116778%2C116777%2C116776%2C116775%2C116774%2C116773%2C116772%2C116771%2C116770%2C116769'
                   '%2C116755%2C116752%2C141509%2C141510%2C141511%2C141512%2C141513%2C141514%2C141515%2C141516'
                   '%2C141517%2C141518%2C141519%2C142777%2C141520%2C141521%2C141522%2C141523%2C141524%2C141644'
                   '%2C116353%2C141491%2C141492%2C141493%2C141494%2C141495%2C141496%2C141497%2C141498%2C141499'
                   '%2C116342%2C116323%2C116273%2C116247%2C116215%2C116189%2C116143%2C116106%2C116017%2C141490'
                   '%2C116455%2C116440%2C116427%2C116415%2C116368%2C116295%2C116269%2C116211%2C116183%2C116136'
                   '%2C141500%2C141501%2C141502%2C141503%2C141504%2C141505%2C141506%2C141507%2C141508%2C116012'
                   '%2C116704%2C116700%2C116695%2C116691%2C116686%2C116682%2C116679%2C116673%2C116669%2C116662'
                   '%2C116655%2C116649%2C116643%2C116637%2C116633%2C116620%2C116611%2C116605%2C116598%2C116585'
                   '%2C116577%2C116571%2C116562%2C116556%2C116550%2C116542%2C116537%2C116530%2C116522%2C116514'
                   '%2C116506%2C116497%2C116488%2C116479%2C116471%2C116460%2C135929%2C116446%2C116417%2C116404'
                   '%2C116370%2C116221%2C116195%2C135993%2C136047%2C115995%2C135615%2C116120%2C116035%2C116277'
                   '%2C116390%2C116306%2C116326%2C116356%2C116430%2C116665%2C136058%2C136069%2C136080%2C136091'
                   '%2C136102%2C136113%2C116448%2C116432%2C116407%2C116392%2C116373%2C116359%2C116346%2C116329'
                   '%2C116308%2C116281%2C116250%2C116225%2C116199%2C116155%2C116123%2C116000%2C141562%2C141594'
                   '%2C116072%2C116422%2C116411%2C116395%2C116376%2C116363%2C116348%2C116335%2C116315%2C116287'
                   '%2C116261%2C116462%2C116450%2C116316%2C116288%2C116004%2C116009%2C116698%2C116694%2C116690'
                   '%2C116685%2C116681%2C116676%2C116671%2C116667%2C116663%2C116657%2C116652%2C116646%2C116641'
                   '%2C116635%2C116628%2C116624%2C116616%2C116609%2C116602%2C116589%2C116566%2C116559%2C116552'
                   '%2C116545%2C116539%2C116533%2C116525%2C116517%2C116509%2C116493%2C116483%2C116475%2C116464'
                   '%2C116452%2C116264%2C116239%2C116205%2C116177%2C116132%2C116092%2C116006%2C141749%2C116574'
                   '%2C116469%2C116468%2C116456%2C116445%2C116444%2C116443%2C116429%2C116416%2C116403%2C116388'
                   '%2C116369%2C116354%2C116343%2C116324%2C116300%2C116274%2C116216%2C116191%2C116145%2C116117'
                   '%2C116518%2C116025%2C115992%2C115987%2C116290%2C132127%2C116553%2C116547%2C116534%2C116526'
                   '%2C116510%2C116503%2C116494%2C116484%2C116466%2C116453%2C116436%2C116412%2C116398%2C116010'
                   '%2C132124%2C132125%2C132126%2C116768%2C116767%2C116766%2C116765%2C116764%2C116763%2C116761'
                   '%2C116760%2C116759%2C116758%2C116757%2C116756%2C116754%2C116753%2C116751%2C116750%2C116749'
                   '%2C116748%2C116747%2C116746%2C116745%2C116744%2C116742%2C116741%2C116740%2C116739%2C116738'
                   '%2C116737%2C116736%2C116735%2C116734%2C116733%2C116732%2C116731%2C116730%2C116725%2C116723'
                   '%2C116713%2C116703%2C116699%2C116658%2C116653%2C116630%2C116568%2C116511%2C116437%2C116337'
                   '%2C116209%2C116179%2C116097%2C116011%2C134007%2C134030%2C141744%2C141745%2C141746%2C141747'
                   '%2C133558%2C116618%2C116743%2C132114%2C132115%2C132116%2C116678%2C116672%2C116668%2C116664'
                   '%2C116661%2C116660%2C116659%2C116654%2C116651%2C116648%2C116645%2C116640%2C116639%2C116627'
                   '%2C116622%2C116614%2C116613%2C116607%2C116600%2C116593%2C116587%2C116579%2C116564%2C116557'
                   '%2C116551%2C116543%2C116538%2C116531%2C116523%2C116515%2C116507%2C116498%2C116489%2C116472'
                   '%2C116461%2C116447%2C116431%2C116418%2C116405%2C116391%2C116371%2C116357%2C116344%2C116327'
                   '%2C116307%2C116278%2C116249%2C116223%2C116196%2C116151%2C116121%2C116038%2C115997%2C116727'
                   '%2C141415%2C141416%2C141417%2C134019%2C141731%2C141732%2C141733%2C141734%2C141735%2C142294'
                   '%2C116623%2C116334%2C116314%2C116286%2C116260%2C116236%2C116202%2C116171%2C116130%2C116080'
                   '%2C116003%2C116480%2C132123%2C116527%2C116399%2C116384%2C116318%2C116291%2C116266%2C116241'
                   '%2C141736%2C141737%2C141740%2C141741%2C141742%2C141743%2C115999%2C115989%2C132119%2C132120'
                   '%2C132121%2C132122%2C116729%2C116726%2C116724%2C116722%2C116721%2C116720%2C116719%2C116718'
                   '%2C116717%2C116716%2C116715%2C116714%2C116712%2C116711%2C116709%2C116708%2C116707%2C116706'
                   '%2C116705%2C116702%2C116701%2C116696%2C116692%2C116687%2C116683%2C116656%2C116650%2C116644'
                   '%2C116638%2C116634%2C116621%2C116612%2C116606%2C116599%2C116592%2C116578%2C116563%2C116487'
                   '%2C116478%2C116325%2C116303%2C116275%2C116248%2C116218%2C116193%2C116148%2C116118%2C116029'
                   '%2C115993%2C116697%2C116693%2C116688%2C116684%2C116680%2C116674%2C116580%2C116572%2C116499'
                   '%2C116490%2C116372%2C116358%2C116034%2C115994%2C116586%2C116710%2C116670%2C132117%2C116647'
                   '%2C116642%2C116636%2C116631%2C116625%2C116619%2C116610%2C116603%2C116596%2C116590%2C116583'
                   '%2C116575%2C116569%2C116560%2C116554%2C116548%2C116540%2C116535%2C116528%2C116520%2C116512'
                   '%2C116504%2C116495%2C116485%2C116476%2C116467%2C116439%2C116426%2C116414%2C116401%2C116386'
                   '%2C116367%2C116340%2C116320%2C116294%2C116268%2C116243%2C116210%2C116182%2C116135%2C116105'
                   '%2C116016%2C116355%2C142242%2C116008%2C116037%2C115996%2C116626%2C116604%2C116597%2C116591'
                   '%2C116584%2C116576%2C116570%2C116561%2C116555%2C116549%2C116541%2C116536%2C116529%2C116521'
                   '%2C116513%2C116505%2C116496%2C116486%2C116470%2C116442%2C116428%2C116272%2C116246%2C116214'
                   '%2C116141%2C116020%2C142911%2C138164%2C134110%2C116112%2C134121%2C116187%2C116615%2C116608'
                   '%2C116601%2C116594%2C116588%2C116581%2C116565%2C116558%2C116544%2C116532%2C116524%2C116516'
                   '%2C116491%2C116481%2C116473%2C116449%2C116433%2C116419%2C116408%2C116394%2C116375%2C116360'
                   '%2C116347%2C116331%2C116310%2C116283%2C116252%2C116200%2C116160%2C116124%2C116053%2C116001'
                   '%2C116632%2C142259%2C142270%2C142275%2C116500%2C116153%2C116122%2C116041%2C115998%2C116167'
                   '%2C116333%2C116313%2C116285%2C116235%2C116129%2C116068%2C116002%2C142905%2C142909%2C142912'
                   '%2C141903%2C138175%2C144059%2C116454%2C116438%2C116424%2C116413%2C116400%2C116385%2C116366'
                   '%2C116351%2C116339%2C116319%2C116293%2C116181%2C116134%2C116104%2C116014%2C139840%2C139852'
                   '%2C133051%2C116296%2C116271%2C116245%2C116213%2C116185%2C116139%2C116109%2C116018%2C133128'
                   '%2C133139%2C139863%2C139874%2C139885%2C133062%2C133073%2C133084%2C133095%2C133106%2C133117'
                   '%2C116015%2C139896%2C116188%2C116142%2C116113%2C116021%2C133150%2C133161%2C116629%2C116617'
                   '%2C116595%2C116582%2C116567%2C116546%2C116465%2C116435%2C116381%2C116207%2C116178%2C116007'
                   '%2C141636%2C132118%2C116501%2C116492%2C116482%2C116474%2C116463%2C116451%2C116434%2C116423'
                   '%2C116396%2C116378%2C116365%2C116349%2C116317%2C116289%2C116263%2C116238%2C116204%2C116176'
                   '%2C116131%2C116089%2C116005%2C115990%2C141640%2C141642%2C116013%2C116689%2C116675%2C116666'
                   '%2C141638%2C116044%2C116270%2C116244%2C116212%2C116184%2C116138%2C116108%2C116190%2C116144'
                   '%2C116115%2C116023%2C116186%2C116140%2C116111%2C116019%2C115844&json_ext_in=%7B%22szq%22%3A%5B%22'
                   '%E5%AE%9D%E5%AE%89%E5%8C%BA%22%5D%7D&_=1659080806392')

jt = json.loads(ret.text.strip('jQuery3600819668742682919_1659079854533(')[:-1])
a = jt['results']
print(len(a))

df = pd.DataFrame(columns=('title', 'xxdz', 'xxlb', 'xxxz', 'source'))
for i in range(len(a)):
    jt1 = json.loads(a[i]['json_ext'])
    df = df.append(pd.DataFrame({'title': [a[i]['title']], 'xxdz': [jt1['xxdz']], 'xxlb': [jt1['xxlb']],
                                 'xxxz': [jt1['xxxz']], 'source': [a[i]['source']]}), ignore_index=True)
    
df.to_csv('宝安区.csv')
# df.columns = []
